#!/usr/bin/env php
<?php

$autoloadPath1 = __DIR__ . '/../../../autoload.php';
$autoloadPath2 = __DIR__ . '/../vendor/autoload.php';
if (file_exists($autoloadPath1)) {
  require_once $autoloadPath1;
} else {
  require_once $autoloadPath2;
}

use function cli\line;
use function BrainGames\Cli\greet;
use BrainGames\Games\Gcd;
use function BrainGames\Engine\gameEngine;

$userName = greet();
$gameRules = Gcd\gameRules();
line($gameRules);
for ($i = 0; $i < 3; $i++) {
  $roundData = Gcd\gameData();
  $roundQuestion = Gcd\gameQuestion($roundData);
  $roundCorrectAnswer = Gcd\gameCorrectAnswer($roundData);
  $roundCompleted = gameEngine($userName, $roundQuestion, $roundCorrectAnswer);
  if (!$roundCompleted) {
    return;
  }
}
line("Congratulations, {$userName}!");
