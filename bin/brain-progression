#!/usr/bin/env php
<?php

$autoloadPath1 = __DIR__ . '/../../../autoload.php';
$autoloadPath2 = __DIR__ . '/../vendor/autoload.php';
if (file_exists($autoloadPath1)) {
  require_once $autoloadPath1;
} else {
  require_once $autoloadPath2;
}

use function cli\line;
use function BrainGames\Cli\greet;
use BrainGames\Games\Progression;
use function BrainGames\Engine\gameEngine;

$userName = greet();
$gameRules = Progression\gameRules();
line($gameRules);
for ($i = 0; $i < 3; $i++) {
  $roundData = Progression\gameData();
  $roundQuestion = Progression\gameQuestion($roundData);
  $roundCorrectAnswer = Progression\gameCorrectAnswer($roundData);
  $roundCompleted = gameEngine($userName, $roundQuestion, $roundCorrectAnswer);
  if (!$roundCompleted) {
    return;
  }
}
line("Congratulations, {$userName}!");
