#!/usr/bin/env php
<?php

require_once __DIR__ . '/../src/AutoloadPath.php';

use function cli\line;
use function BrainGames\Cli\greet;
use BrainGames\Games\Progression;
use function BrainGames\Engine\gameEngine;

$userName = greet();
$gameRules = Progression\gameRules();
line($gameRules);
for ($i = 0; $i < 3; $i++) {
  $roundData = Progression\gameData();
  $roundQuestion = Progression\gameQuestion($roundData);
  $roundCorrectAnswer = Progression\gameCorrectAnswer($roundData);
  $roundCompleted = gameEngine($userName, $roundQuestion, $roundCorrectAnswer);
  if (!$roundCompleted) {
    return;
  }
}
line("Congratulations, {$userName}!");
